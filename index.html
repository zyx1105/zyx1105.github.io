<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zyx1105.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Welcome to my Blog-Zzzzzz">
<meta property="og:url" content="https://zyx1105.github.io/index.html">
<meta property="og:site_name" content="Welcome to my Blog-Zzzzzz">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Zyx">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://zyx1105.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Welcome to my Blog-Zzzzzz</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Welcome to my Blog-Zzzzzz</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zyx1105.github.io/2020/05/13/%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E8%AF%86%E5%88%AB%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zyx">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my Blog-Zzzzzz">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/13/%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E8%AF%86%E5%88%AB%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">汽车零部件识别算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-05-13 08:34:10 / Modified: 08:33:47" itemprop="dateCreated datePublished" datetime="2020-05-13T08:34:10+08:00">2020-05-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>背景</p>
<ul>
<li>人工分拣耗时耗力，且分拣正确率不高（60-70%）</li>
<li>人工智能领域正在快速发展，其中应用于识别分类方向的深度学习为重点研究方向</li>
</ul>
<h2 id="技术路线"><a href="#技术路线" class="headerlink" title="技术路线"></a>技术路线</h2><p>  基于** TensorFlow 框架，实现零件的识别**。<br>  TensorFlow是一个基于数据流编程的符号数学系统，被广泛应 用于各类机器学习算法的编程实现。   本算法由五个部分组成：数据增强、图片标注、训练模型、测试模型、预测模型。数据增强用于对原始收集的图像进行数据扩增，解决初始数据量不足的问题；图片标注，为将各类图片以其特定的文件命名格式进行命名，有利于后期的训练；训练模型，为该算法的核心程序，通过搭建卷积神经网络，进行训练，从而获得最优参数模型；测试模式：通过训练模式所获得的最优参数解，来进行测试集的预测，从而获得正确率，进一步确定训练的效果；预测模型：将未知的图片输入到训练完成的最优参数模型中，从而获得相应的类别。</p>
<h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>tensorflow  1.5.0</p>
<p>CUDA  9.0.176</p>
<p>CUDNN  7</p>
<p>操作系统：Linux ubuntu 16.04</p>
<p>集成开发、调试及编译环境：pycharm-community-2019.2.1</p>
<h2 id="系统总体结构"><a href="#系统总体结构" class="headerlink" title="系统总体结构"></a>系统总体结构</h2><p>该算法基于<strong>TensorFlow</strong>框架，实现零件的识别。<br>TensorFlow是一个基于数据流编程的符号数学系统，被广泛应用于各类机器学习算法的编程实现。<br>本算法由五个部分组成：数据增强、图片标注、训练模型、测试模型、预测模型。</p>
<ul>
<li>数据增强用于对原始收集的图像进行数据扩增，解决初始数据量不足的问题；</li>
<li>图片标注，为将各类图片以其特定的文件命名格式进行命名，有利于后期的训练；</li>
<li>训练模型，为该算法的核心程序，通过搭建卷积神经网络，进行训练，从而获得最优参数模型；</li>
<li>测试模式：通过训练模式所获得的最优参数解，来进行测试集的预测，从而获得正确率，进一步确定训练的效果；</li>
<li>预测模型：将未知的图片输入到训练完成的最优参数模型中，从而获得相应的类别。<img src="https://img-blog.csdnimg.cn/20200513002431589.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzQ2MTYwOA==,size_16,color_FFFFFF,t_70#pic_center" alt="整体设计"></li>
</ul>
<h2 id="数据增强"><a href="#数据增强" class="headerlink" title="数据增强"></a>数据增强</h2><p><img src="https://img-blog.csdnimg.cn/20200513002554562.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzQ2MTYwOA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>  <strong>增强训练数据，就能够提升算法的准确率，因为这样可以避免过拟合，更好地泛化。</strong>主要调用opencv库中的图像处理函数进行按照比例的随机选择图像处理方法，从而对图像进行扩增，其中，图像处理方法，分为几何变换，颜色变换，对比度和亮度变化，加入噪音和图像模糊处理。其中几何变换由分为：随机改变图像的大小，随机进行缩放，旋转，翻转；从原始图像随机裁剪部分图片；图片的水平和竖直翻转。加入噪声主要是对主成分做一个（0，0.1）的高斯扰动。颜色变换为将RGB三个通道的分量大小按照比例进行缩放。对比度和亮度变化为给图片碎甲加一些光照，如锐化，凸点，自适应直方图均衡化等。图像模糊处理分为三个部分：普通模糊，一般模糊和非常模糊处理。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">sometimes = <span class="keyword">lambda</span> aug: iaa.Sometimes(<span class="number">0.5</span>,</span><br><span class="line">aug)</span><br><span class="line">seq = iaa.Sequential([</span><br><span class="line">iaa.SomeOf((<span class="number">0</span>, <span class="number">5</span>),</span><br><span class="line">               [</span><br><span class="line">                   iaa.Fliplr(<span class="number">0.5</span>), </span><br><span class="line">                   iaa.Flipud(<span class="number">0.5</span>), </span><br><span class="line">                   sometimes(</span><br><span class="line">                      iaa.Superpixels(</span><br><span class="line">                          p_replace=(<span class="number">0</span>, <span class="number">1.0</span>)</span><br><span class="line">                           n_segments=(<span class="number">20</span>, <span class="number">200</span>)</span><br><span class="line">                       )</span><br><span class="line">                   ),</span><br><span class="line">                  iaa.OneOf([</span><br><span class="line">                       iaa.GaussianBlur((<span class="number">0</span>,<span class="number">3.0</span>)),</span><br><span class="line">                       iaa.AverageBlur(k=(<span class="number">2</span>, <span class="number">7</span>)),</span><br><span class="line">                      iaa.MedianBlur(k=(<span class="number">3</span>,<span class="number">11</span>)),</span><br><span class="line">                   ])，</span><br><span class="line">                   iaa.Sharpen(alpha=(<span class="number">0</span>, <span class="number">1.0</span>),</span><br><span class="line">lightness=(<span class="number">0.75</span>, <span class="number">1.5</span>)),</span><br><span class="line"></span><br><span class="line">                   iaa.Emboss(alpha=(<span class="number">0</span>, <span class="number">1.0</span>),</span><br><span class="line">strength=(<span class="number">0</span>, <span class="number">2.0</span>)),</span><br><span class="line">                   iaa.AdditiveGaussianNoise(</span><br><span class="line">                       loc=<span class="number">0</span>, scale=(<span class="number">0.0</span>, <span class="number">0.05</span></span><br><span class="line">* <span class="number">255</span>)</span><br><span class="line">                   ),</span><br><span class="line">                   iaa.Invert(<span class="number">0.05</span>,</span><br><span class="line">per_channel=<span class="literal">True</span>),  <span class="comment"># invert color</span></span><br><span class="line">channels</span><br><span class="line">                   iaa.AddElementwise((<span class="number">-40</span>,</span><br><span class="line"><span class="number">40</span>)),</span><br><span class="line">                  iaa.Multiply((<span class="number">0.5</span>, <span class="number">1.5</span>)),                  </span><br><span class="line">iaa.MultiplyElementwise((<span class="number">0.5</span>, <span class="number">1.5</span>)),                  </span><br><span class="line">iaa.ContrastNormalization((<span class="number">0.5</span>, <span class="number">2.0</span>)),</span><br><span class="line">               ],</span><br><span class="line">               random_order=<span class="literal">True</span>               )</span><br><span class="line">], random_order=<span class="literal">True</span>)</span><br><span class="line">path = <span class="string">'/home/ubuntu/coding/test/windshield_wiper/'</span></span><br><span class="line">imglist = []</span><br><span class="line">folderlist = os.listdir(path)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> folderlist:   </span><br><span class="line">path1=os.path.join(path,item)</span><br><span class="line">img = cv2.imread(path1)</span><br><span class="line">print(<span class="string">'item is '</span>,item)</span><br><span class="line">print(<span class="string">'img is '</span>,img)</span><br><span class="line"><span class="comment">#images = load_batch(batch_idx)</span></span><br><span class="line">imglist.append(img)</span><br><span class="line">print(<span class="string">'imglist is '</span> ,imglist)</span><br><span class="line"><span class="comment">#print("the length of imglist" +</span></span><br><span class="line">len(imglist))</span><br><span class="line">print(<span class="string">'all the picture have been appent to</span></span><br><span class="line"><span class="string">imglist'</span>)</span><br><span class="line"><span class="keyword">for</span> count <span class="keyword">in</span> range(<span class="number">30</span>):</span><br><span class="line">images_aug = seq.augment_images(imglist)</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> range(len(images_aug)):</span><br><span class="line">filename = str(count) + str(index) + <span class="string">'.jpg'</span></span><br><span class="line">cv2.imwrite(path + filename, images_aug[index])</span><br><span class="line">print(<span class="string">'image of count%s index%s has been writen'</span> % (count, index))</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200513003029556.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzQ2MTYwOA==,size_16,color_FFFFFF,t_70#pic_center" alt="数据增强效果图"></p>
<h2 id="图片标注"><a href="#图片标注" class="headerlink" title="图片标注"></a>图片标注</h2><p>为了利于后期的训练，故要将图片的名字按照label_id.jpg的格式进行重命名。其中，label为每一类的标签，其对应关系如表1所示，id为图片的序号，每一张图片有自己的单独的序号。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rename</span><span class="params">(rename_path, outer_path,</span></span></span><br><span class="line"><span class="function"><span class="params">folderlist)</span>:</span><span class="comment"># 列举文件夹   </span></span><br><span class="line"><span class="keyword">for</span> folder <span class="keyword">in</span> folderlist:       </span><br><span class="line"><span class="keyword">if</span> os.path.basename(folder) == <span class="string">'doorknod'</span>:            </span><br><span class="line">foldnum = <span class="number">0</span>       </span><br><span class="line"><span class="keyword">elif</span> os.path.basename(folder) == <span class="string">'rearview_mirrow'</span>:           </span><br><span class="line">foldnum = <span class="number">1</span>       </span><br><span class="line"><span class="keyword">elif</span> os.path.basename(folder) == <span class="string">'steering_wheel'</span>:           </span><br><span class="line">foldnum = <span class="number">2</span>       </span><br><span class="line"><span class="keyword">elif</span> os.path.basename(folder) == <span class="string">'wheel'</span>:           </span><br><span class="line">foldnum = <span class="number">3</span>      </span><br><span class="line"><span class="keyword">elif</span> os.path.basename(folder) == <span class="string">'windshield_wiper'</span>:           </span><br><span class="line">foldnum = <span class="number">4</span>       </span><br><span class="line">inner_path = os.path.join(outer_path, folder)       </span><br><span class="line">total_num_folder = len(folderlist) </span><br><span class="line"><span class="comment"># 文件夹的总数       </span></span><br><span class="line"><span class="comment"># print 'total have %d folders' % (total_num_folder)   #打印文件夹的总数      </span></span><br><span class="line">filelist = os.listdir(inner_path) </span><br><span class="line"><span class="comment"># 列举图片       </span></span><br><span class="line">i = <span class="number">0</span>      </span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> filelist:          </span><br><span class="line">total_num_file = len(filelist)  <span class="comment"># 单个文件夹内图片的总数           </span></span><br><span class="line"><span class="keyword">if</span> item.endswith(<span class="string">'.jpg'</span>):<span class="comment">#endwith </span></span><br><span class="line">判断字符串是不是以“.jpg<span class="string">"结尾  字符串匹配</span></span><br><span class="line"><span class="string">                src =</span></span><br><span class="line"><span class="string">os.path.join(os.path.abspath(inner_path), item) </span></span><br><span class="line"><span class="string"># 原图的地址</span></span><br><span class="line"><span class="string">                #os.path.abspath(_file_):  获得当前脚本的完整路径</span></span><br><span class="line"><span class="string">                dst =</span></span><br><span class="line"><span class="string">os.path.join(os.path.abspath(rename_path), str(foldnum) + '_' + str(</span></span><br><span class="line"><span class="string">i)                +'.jpg')</span></span><br><span class="line"><span class="string"> try:</span></span><br><span class="line"><span class="string">                os.rename(src, dst)</span></span><br><span class="line"><span class="string">                print 'converting %s to %s ...'</span></span><br><span class="line"><span class="string">% (src, dst)</span></span><br><span class="line"><span class="string">                i += 1</span></span><br><span class="line"><span class="string"> except:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                continue</span></span><br><span class="line"><span class="string">rename_path1 =</span></span><br><span class="line"><span class="string">'/home/ubuntu/coding/renametrain'</span></span><br><span class="line"><span class="string">outer_path1 = '/home/ubuntu/coding/train'</span></span><br><span class="line"><span class="string">folderlist1 =</span></span><br><span class="line"><span class="string">os.listdir("</span>/home/ubuntu/coding/train<span class="string">")</span></span><br><span class="line"><span class="string">rename(rename_path1, outer_path1,</span></span><br><span class="line"><span class="string">folderlist1)</span></span><br><span class="line"><span class="string">print("</span>train totally rename ! !</span><br><span class="line">!<span class="string">")</span></span><br><span class="line"><span class="string">rename_path2 =</span></span><br><span class="line"><span class="string">'/home/ubuntu/coding/renametest'</span></span><br><span class="line"><span class="string">outer_path2 = '/home/ubuntu/coding/test'</span></span><br><span class="line"><span class="string">folderlist2 =</span></span><br><span class="line"><span class="string">os.listdir('/home/ubuntu/coding/test')</span></span><br><span class="line"><span class="string">rename(rename_path2, outer_path2,</span></span><br><span class="line"><span class="string">folderlist2)</span></span><br><span class="line"><span class="string">print("</span>test totally rename ! ! !<span class="string">")</span></span><br><span class="line"><span class="string">def convertjpg(jpgfile, outdir, width=258,</span></span><br><span class="line"><span class="string">height=258): # 修改图片尺寸   </span></span><br><span class="line"><span class="string">img = Image.open(jpgfile)   </span></span><br><span class="line"><span class="string">img = img.convert('RGB')   </span></span><br><span class="line"><span class="string">img.save(os.path.join(outdir, os.path.basename(jpgfile)))  </span></span><br><span class="line"><span class="string">new_img = img.resize((width, height), Image.BILINEAR)   </span></span><br><span class="line"><span class="string">new_img.save(os.path.join(outdir, os.path.basename(jpgfile)))</span></span><br><span class="line"><span class="string">for jpgfile in</span></span><br><span class="line"><span class="string">glob.glob("</span>/home/ubuntu/coding/renametrain/*.jpg<span class="string">"):   </span></span><br><span class="line"><span class="string">convertjpg(jpgfile, "</span>/home/ubuntu/coding/data<span class="string">")</span></span><br><span class="line"><span class="string">print("</span>train totally resize ! !</span><br><span class="line">!<span class="string">")</span></span><br><span class="line"><span class="string">for jpgfile in</span></span><br><span class="line"><span class="string">glob.glob("</span>/home/ubuntu/coding/renametest/*.jpg<span class="string">"):  </span></span><br><span class="line"><span class="string">convertjpg(jpgfile, "</span>/home/ubuntu/coding/val<span class="string">")</span></span><br><span class="line"><span class="string">print("</span>test totally</span><br><span class="line">resize ! ! !<span class="string">")</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200513003457866.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzQ2MTYwOA==,size_16,color_FFFFFF,t_70#pic_center" alt="图片标注"></p>
<h2 id="训练模型"><a href="#训练模型" class="headerlink" title="训练模型"></a>训练模型</h2><p><img src="https://img-blog.csdnimg.cn/20200513003605274.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzQ2MTYwOA==,size_16,color_FFFFFF,t_70#pic_center" alt="训练模型"></p>
<ul>
<li><p>CNN：与普通的神经网络相似，具有可学习的权重和偏置常数的神经元组成，每个神经元都接受一些输入，并做一些点积计算，然后算出对应的分类的概率，从而选择出为哪一个类别。</p>
</li>
<li><p>过拟合：在样本数目过小导致训练出来的模型在训练集的准确度达到接近1，导致过于贴合训练集的特征，无法对未知的图片进行很好的分辨，泛化能力弱</p>
</li>
<li><p>损失函数用于没描述模型和真实值之间的差距大小，本算法选取了交叉熵的损失计算方式(熵是信息量的加权平均数，熵越小，则对应的不确定性越小CEH（p,q）=-∑p(x)logq(x)<br>p:真实样本分布，q 待估计的模型)</p>
</li>
<li><p>激活函数：可以使得梯度下降的算法运行的更快。</p>
</li>
<li><p>梯度下降：数据不断找到最优解的过程，（学习率）数据迭代的快慢。这个学习率不可以过大，也不可以过小，过大可能会导致无法达到最优解，导致梯度爆炸，过小可以能会导致迭代速率太慢</p>
</li>
<li><p>梯度爆炸：初始层的权值过大，导致前面层比后面曾变化更快，导致权值越来越大，从而产生梯度爆炸<br>发生连乘后会导致权值越来越大，从而导致梯度爆炸=&gt;减小模型层数，或者改用relu，权重大幅更新。</p>
</li>
<li><p>梯度消失：反向传播的时候，最后一层的导数几乎为0，根据链式规则，那么最后一层的值几乎为0。=&gt;增大学习率，加深层数。</p>
</li>
<li><p>[2.2]最大池化层就是将输入按照[2,2]分开，选取最大的一个值，缩减模型的大小，提高计算速度，同时提高算法的鲁棒性，保留最明显的特征。</p>
</li>
<li><p>全连接层可以理解为将最后的输出矩阵全部变成一列，然后再经过softmax的计算得出</p>
</li>
<li><p>softmax:输出=e^x1/∑e^xi 从而得到概率最大的一类，作为预测结果。</p>
</li>
<li><p>dropout:被丢弃的比例，如果将所有的特征都计算进去，对电脑的计算能力有较大的要求，所以设置随机抛弃部分特征值，优化计算。</p>
</li>
<li><p>batch：如果一次将所有的图片都放进去会导致占用过多内存，对电脑算例要求过高，所以采取一次随机挑选batch的图片进行预测。</p>
</li>
<li><p>可调整的参数为：迭代次数，dropout,batch等。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">datas_placeholder = tf.placeholder(tf.float32, [<span class="literal">None</span>, <span class="number">258</span>, <span class="number">258</span>, <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">labels_placeholder = tf.placeholder(tf.int32, [<span class="literal">None</span>])</span><br><span class="line"></span><br><span class="line">dropout_placeholdr = tf.placeholder(tf.float32) <span class="comment"># 存放DropOut参数的容器，训练时为0.25，测试时为0</span></span><br><span class="line"></span><br><span class="line">conv0 = tf.layers.conv2d(datas_placeholder,<span class="number">10</span>,<span class="number">5</span>,padding</span><br><span class="line">=<span class="string">'same'</span>,activation=tf.nn.relu); <span class="comment">#定义卷积层，20个卷积核，卷积核大小为5，用Relu激活</span></span><br><span class="line"></span><br><span class="line">pool0 = tf.layers.max_pooling2d(conv0,[<span class="number">2</span>,<span class="number">2</span>],[<span class="number">2</span>,<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">conv1 = tf.layers.conv2d(pool0,<span class="number">20</span>,<span class="number">5</span>,padding =</span><br><span class="line"><span class="string">'same'</span>,activation=tf.nn.relu);</span><br><span class="line"></span><br><span class="line">pool1 = tf.layers.max_pooling2d(conv1,[<span class="number">2</span>,<span class="number">2</span>],[<span class="number">2</span>,<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">conv2 = tf.layers.conv2d(pool1, <span class="number">40</span>, <span class="number">5</span>, activation=tf.nn.relu) <span class="comment"># 定义卷积层, 20个卷积核, 卷积核大小为5，用Relu激活</span></span><br><span class="line"></span><br><span class="line">pool2 = tf.layers.max_pooling2d(conv2, [<span class="number">2</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">2</span>]) <span class="comment"># 定义max-pooling层，pooling窗口为2x2，步长为2x2</span></span><br><span class="line"></span><br><span class="line">conv3 = tf.layers.conv2d(pool2, <span class="number">60</span>, <span class="number">5</span>, activation=tf.nn.relu) <span class="comment"># 定义卷积层, 40个卷积核, 卷积核大小为4，用Relu激活</span></span><br><span class="line"></span><br><span class="line">pool3 = tf.layers.max_pooling2d(conv3, [<span class="number">2</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">2</span>]) <span class="comment"># 定义max-pooling层，pooling窗口为2x2，步长为2x2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#conv4 = tf.layers.conv2d(pool3, 60, 3, activation=tf.nn.relu) # 定义卷积层, 60个卷积核, 卷积核大小为3，用Relu激活</span></span><br><span class="line"></span><br><span class="line">flatten = tf.layers.flatten(pool3)</span><br><span class="line"></span><br><span class="line">fc1 = tf.layers.dense(flatten, <span class="number">1000</span>, activation=tf.nn.relu)</span><br><span class="line"></span><br><span class="line">fc2 = tf.layers.dense(fc1,<span class="number">100</span>,activation= tf.nn.relu)</span><br><span class="line"></span><br><span class="line">dropout_fc = tf.layers.dropout(fc2, dropout_placeholdr)</span><br><span class="line"></span><br><span class="line">logits = tf.layers.dense(dropout_fc, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">predicted_labels = tf.arg_max(logits, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">losses = tf.nn.softmax_cross_entropy_with_logits(</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">labels=tf.one_hot(labels_placeholder, <span class="number">5</span>),</span><br><span class="line"></span><br><span class="line">    logits=logits</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mean_loss = tf.reduce_mean(losses)</span><br><span class="line"></span><br><span class="line">optimizer = tf.train.AdamOptimizer(learning_rate=<span class="number">1e-3</span>).minimize(losses)</span><br><span class="line"></span><br><span class="line">n = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">saver = tf.train.Saver()<span class="comment"># 用于保存和载入模型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> train:</span><br><span class="line"></span><br><span class="line">        t1 = time.time()</span><br><span class="line"></span><br><span class="line">        print(<span class="string">"训练模式"</span>)</span><br><span class="line"></span><br><span class="line">               sess.run(tf.global_variables_initializer())</span><br><span class="line"></span><br><span class="line">        x = []</span><br><span class="line"></span><br><span class="line">        y = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> step <span class="keyword">in</span> range(<span class="number">15000</span>):</span><br><span class="line"></span><br><span class="line">          pathDir =</span><br><span class="line">os.listdir(data_dir)  <span class="comment"># 取图片的原始路径</span></span><br><span class="line"></span><br><span class="line">          filenumber =</span><br><span class="line">len(pathDir)</span><br><span class="line"></span><br><span class="line">          rate = <span class="number">0.03</span>  <span class="comment"># 自定义抽取图片的比例，比方说100张抽10张，那就是0.1</span></span><br><span class="line"></span><br><span class="line">          picknumber = int(filenumber</span><br><span class="line">* rate)  <span class="comment"># 按照rate比例从文件夹中取一定数量图片</span></span><br><span class="line"></span><br><span class="line">          sample =</span><br><span class="line">random.sample(pathDir, picknumber)  <span class="comment"># 随机选取picknumber数量的样本图片</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">#print (sample)</span></span><br><span class="line"></span><br><span class="line">         </span><br><span class="line">os.mkdir(<span class="string">'/home/ubuntu/coding/batch'</span>)</span><br><span class="line"></span><br><span class="line">         </span><br><span class="line">tarDir=<span class="string">'/home/ubuntu/coding/batch'</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">for</span> name <span class="keyword">in</span> sample:</span><br><span class="line"></span><br><span class="line">              origin_dir =</span><br><span class="line">os.path.join(data_dir,name)</span><br><span class="line"></span><br><span class="line">              tar_dir</span><br><span class="line">=os.path.join(tarDir,name)</span><br><span class="line"></span><br><span class="line">             </span><br><span class="line">shutil.copy(origin_dir, tar_dir)</span><br><span class="line"></span><br><span class="line">          fpaths, datas, labels =</span><br><span class="line">read_data(tarDir)</span><br><span class="line"></span><br><span class="line">          train_feed_dict = &#123;</span><br><span class="line"></span><br><span class="line">              datas_placeholder: datas,</span><br><span class="line"></span><br><span class="line">              labels_placeholder:</span><br><span class="line">labels,</span><br><span class="line"></span><br><span class="line">              dropout_placeholdr:</span><br><span class="line"><span class="number">0.25</span></span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          _, mean_loss_val =</span><br><span class="line">sess.run([optimizer, mean_loss], feed_dict=train_ feed_  dict)</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> step % <span class="number">10</span> == <span class="number">0</span>:</span><br><span class="line"></span><br><span class="line">            print(<span class="string">"step = &#123;&#125;\tmean loss =</span></span><br><span class="line"><span class="string">&#123;&#125;"</span>.format(step, mean_loss_val))</span><br><span class="line"></span><br><span class="line">            x.append(step)</span><br><span class="line"></span><br><span class="line">           </span><br><span class="line">y.append(mean_loss_val)</span><br><span class="line"></span><br><span class="line">          shutil.rmtree(tarDir)</span><br><span class="line"></span><br><span class="line">        saver.save(sess,</span><br><span class="line">model_path)</span><br><span class="line"></span><br><span class="line">        print(<span class="string">"训练结束，保存模型到&#123;&#125;"</span>.format(model_path))</span><br></pre></td></tr></table></figure>
<p>运行结果<br>生成对应的参数模型<br><img src="https://img-blog.csdnimg.cn/20200513080632726.png#pic_center" alt="运行效果"><br><img src="https://img-blog.csdnimg.cn/20200513081054326.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzQ2MTYwOA==,size_16,color_FFFFFF,t_70#pic_center" alt="损失函数"></p>
<h2 id="测试模型"><a href="#测试模型" class="headerlink" title="测试模型"></a>测试模型</h2><p>交叉测验：利用之前收集的数据集进行7：3划分，7用来测试，3的部分进行测验，参数用训练模型得到的参数。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">saver.restore(sess, model_path)</span><br><span class="line">        print(<span class="string">"从&#123;&#125;载入模型"</span>.format(model_path))</span><br><span class="line">        <span class="comment"># label和名称的对照关系</span></span><br><span class="line">        label_name_dict = &#123;</span><br><span class="line">            <span class="number">0</span>:</span><br><span class="line"><span class="string">"doorknod"</span>,</span><br><span class="line">            <span class="number">1</span>:</span><br><span class="line"><span class="string">"rearview_mirrow"</span>,</span><br><span class="line">            <span class="number">2</span>:</span><br><span class="line"><span class="string">"steering_wheel"</span>,</span><br><span class="line">            <span class="number">3</span>: <span class="string">"wheel"</span>,</span><br><span class="line">            <span class="number">4</span>:</span><br><span class="line"><span class="string">"windshield_wiper"</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        correct_average = <span class="number">0</span></span><br><span class="line">        x=[]</span><br><span class="line">        y=[]</span><br><span class="line">        <span class="keyword">for</span> step <span class="keyword">in</span> range(<span class="number">1000</span>):</span><br><span class="line">            correct_rate=<span class="number">0.00</span></span><br><span class="line">            pathDir =</span><br><span class="line">os.listdir(data_dir)  <span class="comment"># 取图片的原始路径</span></span><br><span class="line">            filenumber =</span><br><span class="line">len(pathDir)</span><br><span class="line">            rate = <span class="number">0.1</span>  <span class="comment"># 自定义抽取图片的比例，比方说100张抽10张，那就是0.1</span></span><br><span class="line">            picknumber = int(filenumber * rate)  <span class="comment"># 按照rate比例从文件夹中取一定数量图片</span></span><br><span class="line">            sample =</span><br><span class="line">random.sample(pathDir, picknumber)  <span class="comment"># 随机选取picknumber数量的样本图片</span></span><br><span class="line">            <span class="comment"># print (sample)</span></span><br><span class="line">os.mkdir(<span class="string">'/home/ubuntu/coding/batch'</span>)</span><br><span class="line">            tarDir = <span class="string">'/home/ubuntu/coding/batch'</span></span><br><span class="line">            <span class="keyword">for</span> name <span class="keyword">in</span> sample:</span><br><span class="line">                origin_dir =</span><br><span class="line">os.path.join(data_dir, name)</span><br><span class="line">                tar_dir =</span><br><span class="line">os.path.join(tarDir, name)</span><br><span class="line">               </span><br><span class="line">shutil.copy(origin_dir, tar_dir)</span><br><span class="line">            fpaths, datas, labels</span><br><span class="line">= read_data(tarDir）</span><br><span class="line">        <span class="comment">#fpaths, datas, labels =</span></span><br><span class="line">read_data(data_dir)</span><br><span class="line">            test_feed_dict = &#123;</span><br><span class="line">                datas_placeholder:</span><br><span class="line">datas,          </span><br><span class="line">label_placeholder: labels,               </span><br><span class="line">dropout_placeholdr: <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">            predicted_labels_val =</span><br><span class="line">sess.run(predicted_labels, feed_dict=test_feed_dict)</span><br><span class="line">            <span class="keyword">for</span> fpath, real_label,</span><br><span class="line">predicted_label <span class="keyword">in</span> zip(fpaths, labels, predicted_labels_val):</span><br><span class="line">                real_label_name =</span><br><span class="line">label_name_dict[real_label]</span><br><span class="line">                predicted_label_name</span><br><span class="line">= label_name_dict[predicted_label]</span><br><span class="line">                print(<span class="string">"&#123;&#125;\t&#123;&#125;</span></span><br><span class="line"><span class="string">=&gt; &#123;&#125;"</span>.format(fpath, real_label_name, predicted_label_name))</span><br><span class="line">            <span class="comment">#rate of correct</span></span><br><span class="line">            correct_number = <span class="number">0</span></span><br><span class="line">            <span class="comment"># 计算正确率</span></span><br><span class="line">            <span class="keyword">for</span> fpath, real_label,</span><br><span class="line">predicted_label <span class="keyword">in</span> zip(fpaths, labels, predicted_labels_val):</span><br><span class="line">                <span class="keyword">if</span> real_label ==</span><br><span class="line">predicted_label:</span><br><span class="line">                    correct_number</span><br><span class="line">+= <span class="number">1</span>       </span><br><span class="line">print(<span class="string">"correct_number &#123;&#125;"</span>.format(correct_number))</span><br><span class="line">            print(<span class="string">"picknumber</span></span><br><span class="line"><span class="string">&#123;&#125;"</span>.format(picknumber))</span><br><span class="line">            correct_rate =</span><br><span class="line">correct_number*<span class="number">100</span>/picknumber</span><br><span class="line">            print(<span class="string">'正确率: &#123;&#125;.00 %'</span>.format(correct_rate))</span><br><span class="line">            x.append(step)</span><br><span class="line">            y.append(correct_rate)</span><br><span class="line">            correct_average =</span><br><span class="line">correct_average+correct_rate</span><br><span class="line">            shutil.rmtree(tarDir)</span><br><span class="line">        correct_average =</span><br><span class="line">correct_average/<span class="number">100</span></span><br><span class="line">        print(<span class="string">'correct_average: &#123;&#125;.00</span></span><br><span class="line"><span class="string">%'</span>.format(correct_average)</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200513082323540.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzQ2MTYwOA==,size_16,color_FFFFFF,t_70#pic_center" alt="正确率"></p>
<h2 id="预测模型"><a href="#预测模型" class="headerlink" title="预测模型"></a>预测模型</h2><p>在完成前面的模型参数的优化之后，利用前面训练好的网络模型和参数进行对位置图片的测试。<br><img src="https://img-blog.csdnimg.cn/20200513082614237.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzQ2MTYwOA==,size_16,color_FFFFFF,t_70#pic_center" alt="预测模型"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zyx1105.github.io/2020/05/12/Markdown%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zyx">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my Blog-Zzzzzz">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/12/Markdown%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Markdown语法总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-12 23:24:11" itemprop="dateCreated datePublished" datetime="2020-05-12T23:24:11+08:00">2020-05-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Markdown语法总结"><a href="#Markdown语法总结" class="headerlink" title="Markdown语法总结"></a>Markdown语法总结</h2><p><a href="https://www.jianshu.com/p/82e730892d42" target="_blank" rel="noopener">https://www.jianshu.com/p/82e730892d42</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zyx1105.github.io/2020/05/12/%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zyx">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my Blog-Zzzzzz">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/12/%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B/" class="post-title-link" itemprop="url">边缘检测</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-12 22:58:11" itemprop="dateCreated datePublished" datetime="2020-05-12T22:58:11+08:00">2020-05-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-03 16:16:40" itemprop="dateModified" datetime="2019-08-03T16:16:40+08:00">2019-08-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>边缘检测</p>
<ul>
<li><p>利用梯度算子进行边缘检测</p>
<ul>
<li><p>BW =edge( I,type,thresh,direction,’nothinning’)</p>
</li>
<li><p>type: ‘roberts’、’sobel’、’prewitt’(算子选择)</p>
</li>
<li><p>thresh：敏感度预置参数。灰度低于预置的边缘将不会被检测到。（系统自动设定参数）</p>
</li>
<li><p>direction:’vertical’、’horizontal’、’both’</p>
</li>
<li><p>‘nothinning’:无细节处理，默认’thinning’</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">I = imread(<span class="string">'C:\Users\Lenovo\Desktop\lena.jpg'</span>);</span><br><span class="line">I= rgb2gray(I);</span><br><span class="line">BW1 = edge(I,<span class="string">'roberts'</span>);</span><br><span class="line">BW2 = edge(I,<span class="string">'sobel'</span>);</span><br><span class="line">BW3 = edge(I,<span class="string">'prewitt'</span>);</span><br><span class="line"><span class="built_in">figure</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>),imshow(I),title(<span class="string">'orignal'</span>)</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>),imshow(BW1),title(<span class="string">'roberts'</span>)</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>),imshow(BW2),title(<span class="string">'sobel'</span>)</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>),imshow(BW3),title(<span class="string">'prewitt'</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>带方向的边缘检测：Robinson算子</p>
</li>
<li><pre><code class="matlab">N=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>
    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>
    <span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-1</span>];
edge_n = imfilter(I,N,<span class="string">'symmetric'</span>,<span class="string">'conv'</span>);

&lt;!--￼<span class="number">1</span>--&gt;


</code></pre>
</li>
</ul>
<ul>
<li><p>Canny边缘检测</p>
<ul>
<li><p>Canny 准则：</p>
<ul>
<li>好的检测效果：对边缘检测的错误尽可能低</li>
<li>边缘的定位要准确</li>
<li>同一边缘要有低的相应次数</li>
</ul>
</li>
<li><p>Canny边缘检测算法：</p>
</li>
<li><p>Canny实现：BW=edge(I,’canny’,thresh.sigma)</p>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zyx1105.github.io/2020/05/12/%E5%9B%BE%E5%83%8F%E7%9A%84%E5%BD%A2%E6%80%81%E5%AD%A6%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zyx">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my Blog-Zzzzzz">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/12/%E5%9B%BE%E5%83%8F%E7%9A%84%E5%BD%A2%E6%80%81%E5%AD%A6%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">图像的形态学处理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-12 22:58:03" itemprop="dateCreated datePublished" datetime="2020-05-12T22:58:03+08:00">2020-05-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-03 15:05:00" itemprop="dateModified" datetime="2019-08-03T15:05:00+08:00">2019-08-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>图像的形态学处理</p>
<ul>
<li>图像腐蚀：对于确定的结构元素，通过腐蚀运算可以消除小于结构元素的点。同时，若一个目标区域中含有细小的连接部分，可以通过腐蚀处理对区域进行分割。（imerode)</li>
<li>腐蚀结果一定是原目标图像的一个子集，即原图像的收缩。</li>
<li>图像的膨胀：定义一个结构元素，从图像左上角开始，按顺序移动结构元素的位置，当结构元素位于某坐标上时，且此时结构元素与目标图像存在交集，则保留坐标上的像素点，否则删除此坐标上的像素点。（imdilate)</li>
<li>腐蚀和膨胀的性质：对偶性，单调性，递减性，交换率（仅适用于图像膨胀），结合律，集合运算，平移不变性</li>
<li>A目标图像，S结构元素</li>
<li>膨胀：A+S；腐蚀：A-S；开运算：（A-S)+S; 闭运算：(A+S)-S</li>
<li>开运算：先腐蚀后膨胀（图像有损），只有附近有完整像素的才会保留，可用于消噪。（I2= imopen(I,SE))</li>
<li>闭运算：先膨胀后腐蚀（图片有损），对目标图像分开的区域进行连接及对图像中的细小缝隙进行填补。(I2= imclose(I,SE))</li>
<li>开运算和闭运算的性质：</li>
<li>对偶性，扩展性，单调性，平移性，等幂性。</li>
<li>其他运算：</li>
<li>击中/不击中运算：可用于目标识别。（I2 = bwhitmiss(I,S1,S2))(S1:击中的结构元素.S2:不击中的结构元素)</li>
<li>细节处理:在保留源图像几何形状的前提下,尽量减少图像所包含的信息量.获得图像的骨架.</li>
<li>算法描述:<ul>
<li>计算当前像素领域内8个方向的可见像素数目,如果少于2个像素,则删除此像素会缩短图像骨架长度;若多于6个元素,则删除会改变图像骨架的几何形状.</li>
<li>计算当前像素周围领域内的区域数目,如果多于1 个,那么删除中心像素会将目标图像分解成不同部分.(I2= bwmorph(I,’thin’,inf))（inf:无穷大）</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zyx1105.github.io/2020/05/12/%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95%EF%BC%8C%E5%9B%BE%E5%83%8F%E7%BC%A9%E6%94%BE%EF%BC%8C%E5%9B%BE%E5%83%8F%E6%97%8B%E8%BD%AC%20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zyx">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my Blog-Zzzzzz">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/12/%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95%EF%BC%8C%E5%9B%BE%E5%83%8F%E7%BC%A9%E6%94%BE%EF%BC%8C%E5%9B%BE%E5%83%8F%E6%97%8B%E8%BD%AC%20/" class="post-title-link" itemprop="url">插值算法，图像缩放，图像旋转 </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-12 22:57:54" itemprop="dateCreated datePublished" datetime="2020-05-12T22:57:54+08:00">2020-05-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-07-08 15:10:10" itemprop="dateModified" datetime="2019-07-08T15:10:10+08:00">2019-07-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>插值算法：处理浮点坐标像素，可以通过获得浮点坐标像素的近似值(用在图像旋转，缩放等)</p>
<ul>
<li><p>最临近插值法（效果差，速度快 ）</p>
<ul>
<li>“四舍五入”：像素值等于离该点最近的输入图像像素值</li>
<li>易产生马赛克和锯齿现象</li>
</ul>
</li>
<li><p>双线性插值法（效果中，速度中）</p>
<ul>
<li>计算出浮点坐标像素的近似值。</li>
<li>两个坐标都是浮点数：<ul>
<li>f1=T1x（1-u)+T2xu;f2=T3x(1-u)+T4xu;f=f1x(1-v)+f2xv;</li>
</ul>
</li>
</ul>
</li>
<li><p>二次立方插值法（效果好，速度慢）</p>
<p><img src="C:%5CUsers%5CLenovo%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1560688445328.png" alt="1560688445328"></p>
<p>其中<code>P00</code>代表目标插值图中的某像素点<code>(x, y)</code>在原图中最接近的映射点</p>
<p>譬如映射到原图中的坐标为<code>(1.1, 1.1)</code>，那么<code>P00</code>就是<code>(1, 1)</code></p>
<p>而最终插值后的图像中的<code>(x, y)</code>处的值即为以上<code>16</code>个像素点的权重卷积之和</p>
</li>
</ul>
<p>  应用：</p>
<ul>
<li><p>图像缩放：B=(A, scale, method);%A :原图像； scale:统一缩放比例（不同比例的缩放：scale=[rows,cols])；method:插值算法的选择（nearest:最临近值；bilinear:双线性插值法；bicubic:二次立方插值法）</p>
</li>
<li><p>图像旋转：B=imrotate(A, angle,method,bbox)%A:原图，角度（°，正数-&gt;逆时针，负数-&gt;顺时针 ），method:差值方法，bbox:（loose:不截取，crop:截取）</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zyx1105.github.io/2020/05/12/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zyx">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my Blog-Zzzzzz">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/12/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-12 18:17:42" itemprop="dateCreated datePublished" datetime="2020-05-12T18:17:42+08:00">2020-05-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zyx1105.github.io/2019/10/24/%E4%B8%AD%E5%80%BC%E6%BB%A4%E6%B3%A2%EF%BC%8C%E5%8F%8C%E8%BE%B9%E6%BB%A4%E6%B3%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zyx">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my Blog-Zzzzzz">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/24/%E4%B8%AD%E5%80%BC%E6%BB%A4%E6%B3%A2%EF%BC%8C%E5%8F%8C%E8%BE%B9%E6%BB%A4%E6%B3%A2/" class="post-title-link" itemprop="url">中值滤波，双边滤波</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-10-24 19:16:39" itemprop="dateCreated datePublished" datetime="2019-10-24T19:16:39+08:00">2019-10-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-07-08 18:15:22" itemprop="dateModified" datetime="2019-07-08T18:15:22+08:00">2019-07-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><p>图像的中值滤波（消除少量离散噪声）—&gt;孤立噪声点和稍密集的噪声点或稍大的噪声点也有很好的去除效果。</p>
<ul>
<li><p>I2=medfilt2(I1,[m,n])(I1待处理矩阵，[m,n]模板大小)</p>
</li>
<li><p>统计排序滤波器：对采样窗口内的奇数个像素的灰度数值进行排序，并取出序列中位于中间的灰度作为中心像素的灰度。（奇数像素）</p>
</li>
<li><p>用于处理椒盐噪声</p>
</li>
<li><p>J=imnoise(I,type,parameters)    -&gt;type: gaussian(高斯白噪声)  ；salt&amp;pepper（椒盐噪声）</p>
</li>
</ul>
</li>
</ul>
<pre><code>+ 双边滤波：同时考虑了空间距离和灰度差距。

+ size(image,3)==1  -&gt;灰度图；

+ size(image,3)==3  -&gt;RGB彩色图

+ [X,Y]=meshgrid(x,y)说明：

+ 基于向量x和向量y中包含的坐标返回二维网格坐标。

  X是一个矩阵，其中每一行都是复制x；Y是一个矩阵，其中每一列都是复制y。

  矩阵X的行数是length(y)；矩阵Y的列数是length(x)。

  举个例子：

  x = 1:3;  y = 1:5; [X,Y] = meshgrid(x,y); 

  x是向量[1 2 3]，y是向量[1 2 3 4 5]；矩阵X的每一行都是x，即[1 2 3]，总共有length(y)=5行；矩阵Y的每一列都是y，即[1 2 3 4 5]，总共有length(x)=3列。

  所以，

  X =                                    Y = 

      1 2 3                        1    1    1

      1 2 3                        2    2    2

      1 2 3                        3    3    3

      1 2 3                         4    4    4

      1 2 3                          5    5    5
  ---------------------
  作者：桂哥317 
  来源：CSDN 
  原文：https://blog.csdn.net/qq_15971883/article/details/79528805 
  版权声明：本文为博主原创文章，转载请附上博文链接！</code></pre><p>图片的锐化：提高对比度</p>
<ul>
<li>拉普拉斯锐化：领域的中心像素灰度值高于其所在领域内其他像素的平均灰度值时，中心像素的灰度应被进一步提高；领域的中心像素灰度值高低于其所在领域内其他像素的平均灰度值时，中心像素的灰度应被进一步减弱；</li>
</ul>
<p>h= fspecial(‘unsharp’,alpha)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zyx1105.github.io/2019/10/24/%E5%9B%BE%E5%83%8F%E9%A2%84%E5%A4%84%E7%90%86%EF%BC%9A%EF%BC%88%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA%E9%83%BD%E6%98%AF%E4%BA%AE%E5%BA%A6%E5%80%BC%E2%80%94%E4%BA%AE%E5%BA%A6%E5%80%BC%E7%9F%A9%E9%98%B5%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zyx">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my Blog-Zzzzzz">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/24/%E5%9B%BE%E5%83%8F%E9%A2%84%E5%A4%84%E7%90%86%EF%BC%9A%EF%BC%88%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA%E9%83%BD%E6%98%AF%E4%BA%AE%E5%BA%A6%E5%80%BC%E2%80%94%E4%BA%AE%E5%BA%A6%E5%80%BC%E7%9F%A9%E9%98%B5%EF%BC%89/" class="post-title-link" itemprop="url">图像预处理：（输入与输出都是亮度值—亮度值矩阵）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-10-24 19:16:39" itemprop="dateCreated datePublished" datetime="2019-10-24T19:16:39+08:00">2019-10-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-05-29 17:41:27" itemprop="dateModified" datetime="2019-05-29T17:41:27+08:00">2019-05-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="图像预处理：（输入与输出都是亮度值—-gt-亮度值矩阵）"><a href="#图像预处理：（输入与输出都是亮度值—-gt-亮度值矩阵）" class="headerlink" title="图像预处理：（输入与输出都是亮度值—&gt;亮度值矩阵）"></a>图像预处理：（输入与输出都是亮度值—&gt;亮度值矩阵）</h3><ul>
<li><p>像素亮度变换</p>
<ul>
<li><p>相关位置的亮度校正</p>
<p>1.退化是系统的。e(i,j)—&gt;理想情况下的错误系数；g(i,j)—&gt;原来没有退化的图像;f(i,j)—&gt;退化之后的图像；</p>
<p>f=e*g;</p>
<p>eg.</p>
</li>
</ul>
</li>
<li><p>描述几何变换</p>
</li>
<li><p>考虑使用待处理像素的一个局部领域的方法</p>
</li>
<li><p>介绍需要有关整个图像知识的图象复原技术</p>
</li>
</ul>
<p>在matlab终彩色图像的表示</p>
<ul>
<li><p>RGB图像（MxNx3)：rab_image=cat(dim,A1,A2…)</p>
<hr>
</li>
</ul>
<p>   获得质量较好的图像可采用如下原则：</p>
<ul>
<li>对缓变的图像，应该细量化，粗采样，以避免假轮廓</li>
<li>对细节丰富的图像，应系采样，粗量化，避免模糊。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zyx1105.github.io/2019/10/24/%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zyx">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my Blog-Zzzzzz">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/24/%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2/" class="post-title-link" itemprop="url">图像分割</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-10-24 19:16:39" itemprop="dateCreated datePublished" datetime="2019-10-24T19:16:39+08:00">2019-10-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-07-30 17:37:03" itemprop="dateModified" datetime="2019-07-30T17:37:03+08:00">2019-07-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>图像分割</p>
<ul>
<li><p>豪格变换（Hough) ：图像像素信息按坐标映射到参数空间的方法。（圆、直线）</p>
</li>
<li><p>核心思想：</p>
<ul>
<li>确定要识别的曲线解析集，即在一定精度上枚举带参数的解析式中所有参数的可能取值。</li>
<li>为解析式集中的每个元素构造计数器</li>
<li>遍历图像中的的所有有效像素，并将每个有效像素的坐标依次代入解析式集中的每个元素，若解析式成立，则将该解析式对应的计数器加1</li>
<li>设定阈值t,遂于计数器值大于t的解析式，可认为其对应的曲线被识别</li>
</ul>
</li>
<li><p>算法：</p>
<ul>
<li>利用hough()函数执行Hough变换，得到Hough矩阵。</li>
<li>利用houghpeaks()函数在Hough矩阵中寻找到峰值点。</li>
<li>利用houghlines()函数在之前两步结果的基础上得到原二值图像中的直线信息。</li>
</ul>
</li>
<li><p>轮廓跟踪</p>
<ul>
<li><p>区域表示：</p>
<ul>
<li>轮廓表示法-&gt;链码表：链码；链码寻址</li>
<li>线段表示法-&gt;线段表</li>
<li>链码表转化成线段表：<ul>
<li>顺序检测链码表，根据链码表提取轮廓中的左端点，右端点喝奇异点，并存入线段中。其中奇异点提取两次。</li>
<li>将线段表中的所有点按照纵坐标排序</li>
<li>将纵坐标相同的所有点按照横坐标排序</li>
</ul>
</li>
<li>区域的形状参数：F=L^2/（4<em>pi</em>S)     L:周长    S：面积</li>
</ul>
</li>
<li><p>单区域追踪</p>
<ul>
<li><p>轮廓方向： 正方向：沿着此方向前进时，区域的内部总是处于轮廓的右边。</p>
</li>
<li><p>搜素下一边界点过程描述：</p>
<ul>
<li>获得上一边界点到当前边界点的链码</li>
<li>将链码加4反向再减1，并以此链码为起点对邻域进行搜索</li>
<li>获得下一边界点并返回下一边界点相对当前点的链码</li>
</ul>
</li>
<li><p>单区域的轮廓跟踪的过程</p>
<ul>
<li>以当前轮廓点为中心在领域内搜索下一轮廓点</li>
<li>获得下一轮廓点的链码并保存在链码表中</li>
<li>若下一轮廓点为起始点，则轮廓跟踪完成；否则，将当前点移动到下一轮廓点并重复步骤1，2</li>
</ul>
</li>
<li><p>多区域跟踪</p>
<ul>
<li>搜素哦起始点并确定起始方向链码</li>
<li>单区域轮廓跟踪</li>
<li>绘制区域轮廓</li>
<li>区域填充</li>
</ul>
</li>
<li><p>编码实现</p>
<ul>
<li><p>B= bwtraceboundary( BW, P, fstep,conn, N, dir)</p>
<p>(BW  为二值图像)</p>
</li>
</ul>
</li>
<li><p>区域填充</p>
<ul>
<li>以一组种子点为开始，将与种子性质相似的像素附加到生长区域的每个种子上。</li>
<li>图像的区域即相互连通的颜色相近的像素集合，区域的填充就是将区域内的像素设定为指定的颜色。</li>
<li>种子算法：填充区域的过程中不关心区域的形状，二十通过获得区域内部的任意一个像素，并以这个像素为种子，不断扩大填充的面积，最终覆盖整个填充区域。</li>
<li>关键：①连通像素的搜素②边界判断<ul>
<li>连通像素的判断：<ul>
<li>区域生长技术：单连接区域生长</li>
</ul>
</li>
<li>容差：颜色相近的两个像素间的两个像素间的最大颜色误差</li>
</ul>
</li>
<li>递归法：从一点出发，按照方向编码用递归的方式遍历填充区域，每到达一个像素就按照方向编码依次判断它相邻的每个像素是否该被填充。</li>
<li>漫水法：<ul>
<li>选取一个起始种子点，获得基准颜色，将种子点压入堆栈</li>
<li>从堆栈中取得一个像素，对其进行填充，然后搜素哦四邻域或者八邻域，如果有需要填充的像素，就压入栈中。</li>
<li>重复步骤二，直至堆栈为空。</li>
</ul>
</li>
<li>行扫描法<ul>
<li>选取一个起始种子点，获得基准颜色，将种子点压入堆栈</li>
<li>从堆栈中取出一个像素，依次对该像素的左右连通像素进行填充，并在填充过程中判断每个填充位置上下两行中相邻像素是否需要被填充，将需要填充的相邻像素压入堆栈</li>
<li>对堆栈中的像素进行检查，去除已被填充的像素</li>
<li>重复步骤二，三，直至堆栈为空</li>
</ul>
</li>
<li>混合连接区域生长法：两个节点的相似性判断依赖与它们各自邻域是否满足某种条件。</li>
<li>中心连接区域生长法：物体中同一区域的各像素的灰度级不会发生较大差异。从满足相似性的准则的点开始，在各个方向上进行区域生长。假设P是已经接受的一小块区域，则检测它的全部邻接点像素，若该点满足预置的相似性准则，则将其加入区域P中，变成P’，对于P’重复以上过程，直至达到终止条件为止。</li>
<li>编程实现：BW2 = imfill(BW)//填充空洞</li>
<li>J = roifill(I,c,r)//实现对指定的感兴趣区域进行填充</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>区域分裂与合并</p>
<ul>
<li><p>从图像金字塔或者四叉树数据结构的任一中间层开始，根据给定的均匀性检验准则进行分裂或者合并操作，并以此来逐步改善区域划分的性能，直到最后将图像分成数量最少的均匀区域为止。</p>
</li>
<li><p>算法描述：</p>
<ul>
<li>确定均匀性测试准则P， 将原始图像构造成四叉树数据结构</li>
<li>将图像四叉树结构中的某一中间层作为初始的区域进行划分。对于任何区域Ai，如果P(Ai)=FALSE，则将每个区域都拆分为成4个相连的象限区域。如果任意1/4子区域Bi也满足P(Bi)=FALSE,那么就再将该子区一分为四。</li>
<li>对于任意两个相邻的区域满足P(A1UA2)=TURE,则将他们合并成一个区域。</li>
<li>重复上述操作，当无法再进行分裂与合并时停止操作</li>
</ul>
</li>
<li><p>均方误差最小测试准则：定义某个区域上的方差，方差最小即为ture</p>
</li>
<li><p>编程相关：</p>
<ul>
<li><p>四叉树分解： S = qtdecomp(I, threshold, [mindim maxdim])</p>
<p>I:灰度图像，threshold:阈值，适用于正方形图像</p>
</li>
<li><p>获得四叉树分解后所有指定大小的子块像素及位置信息：</p>
<p>[vals, r, c] = qtgetblk(I, S, dim)</p>
<p>I:灰度图像，dim指定子块的大小</p>
</li>
<li><p>将四叉树分解所得到的子块中符合条件的部分全部替换成指定的子块：J = qtsetblk(I, S, dim, vals)</p>
</li>
<li></li>
</ul>
</li>
</ul>
<p>水域分割（分水岭算法）</p>
<ul>
<li>水域合并规则：<ul>
<li>如果新的水域与若干浅水域相连，则将这些浅水域合并到新的水域</li>
<li>如果新的水域与若干小水域相连，则将这些小水域合并成新的水域</li>
<li>如果新的水域与若干深水域相邻，则选择平均深度最浅的一个进行合并</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zyx1105.github.io/2019/10/24/%E6%AD%A3%E4%BA%A4%E5%8F%98%E6%8D%A2%20%E4%B8%8E%E5%9B%BE%E5%83%8F%E5%8E%8B%E7%BC%A9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zyx">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my Blog-Zzzzzz">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/24/%E6%AD%A3%E4%BA%A4%E5%8F%98%E6%8D%A2%20%E4%B8%8E%E5%9B%BE%E5%83%8F%E5%8E%8B%E7%BC%A9/" class="post-title-link" itemprop="url">正交变换 与图像压缩</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-10-24 19:16:39" itemprop="dateCreated datePublished" datetime="2019-10-24T19:16:39+08:00">2019-10-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-04 18:07:26" itemprop="dateModified" datetime="2019-08-04T18:07:26+08:00">2019-08-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>正交变换 与图像压缩</p>
<p>傅里叶变换</p>
<ul>
<li><p>时域连续—&gt;频域非周期</p>
</li>
<li><p>时域的非周期—&gt;频域连续</p>
</li>
</ul>
<p>​                         </p>
<p>图像的频率—&gt;图像中灰度变化的剧烈程度的指标。</p>
<p>傅里叶频谱图上看到的亮点实际是图像上某一点与领域点差异的强弱，即梯度的大小。梯度大，亮度强。</p>
<p>快速傅里叶变换（FFT)：</p>
<ul>
<li>蝶形算法</li>
</ul>
<p>码位倒序：将十进制转换成二进制，然后将二进制的序列倒序重排，再将颠倒顺序后的二进制转换成十进制。</p>
<p>编程实现FFT：</p>
<ul>
<li>正变换：Y = fft2(X, m,  n):X-&gt;的输入图像;m,n—&gt;第一维到第二维规整到指定的长度；abs(Y) —&gt;幅度谱；angle(Y)—&gt;相位谱</li>
<li>逆变换：Y = ifft2(X,m , n)</li>
</ul>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">I = imread(<span class="string">'C:\Users\Administrator\Desktop\lena.jpg'</span>);</span><br><span class="line">I1 = rgb2gray(I);</span><br><span class="line">fcoef = fft2(double(I1));<span class="comment">%进行快速傅里叶变换</span></span><br><span class="line"> tmp1 = <span class="built_in">log</span>(<span class="number">1</span>+<span class="built_in">abs</span>(fcoef));<span class="comment">%傅里叶变换的幅度值范围大到不合适在屏幕上显示，</span></span><br><span class="line"> <span class="comment">%为了在屏幕上凸显出高低变化的连续性，可以用对数尺度来替换线性尺度，为了确保大于0，故＋1处理</span></span><br><span class="line"> spectrum = fftshift(fcoef);<span class="comment">%将频谱图移到图像的中心</span></span><br><span class="line"> tmp2 = <span class="built_in">log</span>(<span class="number">1</span>+<span class="built_in">abs</span>(spectrum));</span><br><span class="line"> ifcoef = ifft2(fcoef);<span class="comment">%逆变换，只有对复数矩阵进行逆变换，才可以恢复原图</span></span><br><span class="line"> <span class="built_in">figure</span>                            <span class="comment">%显示处理结果</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>), imshow(I1), title(<span class="string">'source image'</span>);</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>), imshow(tmp1,[]), title(<span class="string">'FFT image'</span>);</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>), imshow(tmp2,[]), title(<span class="string">'shift FFT image'</span>);</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>), imshow(ifcoef,[]), title(<span class="string">'IFFT image'</span>);</span><br></pre></td></tr></table></figure>



<p>离散余弦变换（DCT)</p>
<p>：空间域的低通滤波器，在傅里叶级数展开式中，如果被展开的函数是实偶函数，则其傅里叶级数中只含有余弦项，再将其离散化，由此可导出离散余弦变换。</p>
<p>JPEG编码：图像分解成8x8,16x16的子块，并对每一个子块进行单独的DCT变换，然后对变换结果进行量化、编码等处理。</p>
<p>快读离散余弦变换（ANN）：</p>
<p>缺点：对高质量图像的影响比低质量图像要大</p>
<p>优点：极大的减少了计算量，效率可观。</p>
<p>编程：</p>
<p>正变换：B = dct2(A, m  ,  n,)</p>
<p>逆变换：A = idct2(B);</p>
<p>D = dctmtx(n);  返回一个n x n 的DCT变换矩阵；D * A就是A矩阵每一列的DCT变换值，D’*A为A的每一列的DCT反变换。</p>
<p>dct2(A)=D<em>A</em>D’;</p>
<p>利用DCT来进行图像压缩：</p>
<p>分块—&gt;正变换—&gt;过滤—&gt;逆变换</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">I = imread(<span class="string">'C:\Users\Administrator\Desktop\lena.jpg'</span>);</span><br><span class="line">I = rgb2gray(I);<span class="comment">%针对灰度图像</span></span><br><span class="line">I = im2double(I);</span><br><span class="line">T = dctmtx(<span class="number">8</span>);</span><br><span class="line">dct = @(block_struct) T * block_struct.data * T';<span class="comment">%写定对每一块的计算方法</span></span><br><span class="line">B = blockproc(I,[<span class="number">8</span> <span class="number">8</span>],dct);<span class="comment">%对I，进行【8，8】的分块处理，同时每一块执行dct的计方法</span></span><br><span class="line">mask = [<span class="number">1</span>   <span class="number">1</span>   <span class="number">1</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">        <span class="number">1</span>   <span class="number">1</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">        <span class="number">1</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">        <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">        <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">        <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">        <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">        <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>];</span><br><span class="line">        <span class="comment">%滤波矩阵，即只对左上角的变换后进行保留</span></span><br><span class="line">B2 = blockproc(B,[<span class="number">8</span> <span class="number">8</span>],@(block_struct) mask .* block_struct.data);</span><br><span class="line">invdct = @(block_struct) T' * block_struct.data * T;</span><br><span class="line">I2 = blockproc(B2,[<span class="number">8</span> <span class="number">8</span>],invdct);<span class="comment">%对逆变换后的I，进行逆变换，获得压缩后的原图形</span></span><br><span class="line">imshow(I), <span class="built_in">figure</span>, imshow(I2)</span><br></pre></td></tr></table></figure>

<p>沃尔什-哈达玛变换—图像信息压缩</p>
<ul>
<li>按沃尔什排列的沃尔什函数</li>
<li>按佩利排列的沃尔什函数</li>
<li>按哈达玛排列的沃尔什函数</li>
</ul>
<p>—&gt;蝶形运算</p>
<p>编程：</p>
<p><code>Y = fwht(X,n,ordering);</code></p>
<p> X：一维信号，n: Y的大小； ordering：排列顺序</p>
<p>处理图像时，考虑<code>H = hadamard(n);</code> 返回值为输出的变换核矩阵。</p>
<p><code>B = blockproc(A,[M,N], fun);</code></p>
<p>将矩阵A分成【MxN】份并分别执行fun方法。</p>
<ul>
<li>无法控制压缩比的代码</li>
</ul>
<p>通过设定简单的阈值来达到滤波压缩的作用</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">I = imread(<span class="string">'C:\Users\Administrator\Desktop\lena.jpg'</span>);</span><br><span class="line">I = rgb2gray(I);<span class="comment">%针对灰度图像</span></span><br><span class="line">I1 = double(I);</span><br><span class="line">T = <span class="built_in">hadamard</span>(<span class="number">8</span>);<span class="comment">%创建n=8的哈达玛变换核矩阵</span></span><br><span class="line">myFun1 = @(block_struct)T*block_struct.data*T/<span class="number">64</span>;<span class="comment">%块方法，注意1/（8*8）</span></span><br><span class="line">H = blockproc(I1, [<span class="number">8</span> <span class="number">8</span>], myFun1);</span><br><span class="line">H(<span class="built_in">abs</span>(H)&lt;<span class="number">3.5</span>)=<span class="number">0</span>;<span class="comment">%设定阈值，滤除系数小的分量，达到压缩的目的</span></span><br><span class="line">myFun2 = @(block_struct)T*block_struct.data*T;<span class="comment">%逆变换不用/（M*N)</span></span><br><span class="line">I2 = blockproc(H, [<span class="number">8</span> <span class="number">8</span>], myFun2);</span><br><span class="line">subplot(<span class="number">121</span>), imshow(I1,[]), title(<span class="string">'original image'</span>);</span><br><span class="line">subplot(<span class="number">122</span>), imshow(I2,[]), title(<span class="string">'zipped image'</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>可以控制压缩比的代码</p>
<p><code>B = im2col(A,[m n],block_type)；</code></p>
<p>重排图像块为矩阵列。重排为列，</p>
<p>A为重排的矩阵，[m,n]为指定分割的小子块矩阵的尺寸，block_type：‘distinct’：不重叠，不足以的填充0，‘sliding’：可重叠。</p>
<p><code>[Y, ins]=sort(A,1/2)</code></p>
<p>对于A排序，若是1—&gt;按照列升序，2—&gt;按照行升序，‘descend’：降序；Y：排序后的矩阵，ins：排序后的索引号=&gt;A = Y*ins</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">I = imread(<span class="string">'C:\Users\Administrator\Desktop\lena.jpg'</span>);</span><br><span class="line">I = rgb2gray(I);<span class="comment">%针对灰度图像</span></span><br><span class="line">I1 = double(I);</span><br><span class="line">[m n] =<span class="built_in">size</span>(I);</span><br><span class="line">sizi = <span class="number">8</span>;</span><br><span class="line">num = <span class="number">16</span>;<span class="comment">%1-num/(8*8)：压缩比</span></span><br><span class="line"><span class="comment">%分块进行离散沃尔什变换</span></span><br><span class="line">T = <span class="built_in">hadamard</span>(sizi);</span><br><span class="line">myFun1 = @(block_struct)T*block_struct.data*T/(sizi.^<span class="number">2</span>);</span><br><span class="line">hdcoe = blockproc(I1, [sizi, sizi], myFun1);<span class="comment">%分块进行离散沃尔什变换</span></span><br><span class="line"><span class="comment">%重新排列系数</span></span><br><span class="line">coe = im2col(hdcoe,  [sizi, sizi], <span class="string">'distinct'</span>);</span><br><span class="line">coe_t = <span class="built_in">abs</span>(coe);</span><br><span class="line">[Y, ind] = <span class="built_in">sort</span>(coe_t);</span><br><span class="line"><span class="comment">%舍去绝对值较小的系数</span></span><br><span class="line">[m_c, n_c] = <span class="built_in">size</span>(coe);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n_c</span><br><span class="line">coe(ind(<span class="number">1</span>:num, <span class="built_in">i</span>), <span class="built_in">i</span>)=<span class="number">0</span>;<span class="comment">%按照列排序，将前16行小的系数都置为0</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">%重建图像</span></span><br><span class="line">re_hdcoe = col2im(coe, [sizi, sizi], [m, n], <span class="string">'distinct'</span>);<span class="comment">%逆变化</span></span><br><span class="line">myFun2 = @(block_struct)T*block_struct.data*T;</span><br><span class="line">re_s = blockproc(re_hdcoe, [sizi, sizi], myFun2);</span><br><span class="line">subplot(<span class="number">121</span>), imshow(I1,[]), title(<span class="string">'original image'</span>);</span><br><span class="line">subplot(<span class="number">122</span>), imshow(re_s,[]), title(<span class="string">'compressed image'</span>);<span class="comment">%压缩比例为75%</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>卡洛南-洛伊变换（K-L变换）</p>
<p>将在原本的坐标中相关的数据，通过转换到新的坐标系中，使得数据不相关。</p>
<ul>
<li>相关函数</li>
</ul>
<p><code>[coeff,score,latent,tsquare]  =  princomp(X)</code></p>
<p>X：输入矩阵 ( nxp)，coeff：对输入矩阵做主成分变换后返回的主成分系数（p x p); score：在新的坐标系中的数据，</p>
<p><code>B =reshape(A, m , n)</code></p>
<p>将A矩阵中的元素按照列读取，然后重组成mxn的矩阵。</p>
<p>图像压缩：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">I = imread(<span class="string">'C:\Users\Administrator\Desktop\lena.jpg'</span>);</span><br><span class="line">I = rgb2gray(I);<span class="comment">%针对灰度图像</span></span><br><span class="line">x = double(I)/<span class="number">255</span>;</span><br><span class="line">[m,n]=<span class="built_in">size</span>(x);</span><br><span class="line">y =[];</span><br><span class="line"><span class="comment">%拆解图像</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:m/<span class="number">8</span>;</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:n/<span class="number">8</span>;</span><br><span class="line">        ii = (<span class="built_in">i</span><span class="number">-1</span>)*<span class="number">8</span>+<span class="number">1</span>;</span><br><span class="line">        jj = (<span class="built_in">j</span><span class="number">-1</span>)*<span class="number">8</span>+<span class="number">1</span>;</span><br><span class="line">        y_app = <span class="built_in">reshape</span>(x(ii:ii+<span class="number">7</span>,jj:jj+<span class="number">7</span>),<span class="number">1</span>,<span class="number">64</span>);</span><br><span class="line">        y=[y;y_app];</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">%将图像的每一个小块分解成64列的一维数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%KL变换</span></span><br><span class="line">[COEFF,SCORE,latent] = pca(y);</span><br><span class="line">kl = y * COEFF;</span><br><span class="line"></span><br><span class="line">kl1 = kl;</span><br><span class="line">kl2 = kl;</span><br><span class="line">kl3 = kl;<span class="comment">%矩阵按照从大到小顺序排列</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%置零压缩过程</span></span><br><span class="line">kl1(:, <span class="number">33</span>:<span class="number">64</span>)=<span class="number">0</span>;</span><br><span class="line">kl2(:, <span class="number">17</span>:<span class="number">64</span>)=<span class="number">0</span>;</span><br><span class="line">kl3(:, <span class="number">9</span>:<span class="number">64</span>)=<span class="number">0</span>;<span class="comment">%将9-64列的像素都置零，实现压缩的方法。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%KL逆变换</span></span><br><span class="line">kl_i = kl*COEFF';</span><br><span class="line">kl1_i = kl1*COEFF';</span><br><span class="line">kl2_i = kl2*COEFF';</span><br><span class="line">kl3_i = kl3*COEFF';</span><br><span class="line"></span><br><span class="line">image = <span class="built_in">ones</span>(<span class="number">256</span>,<span class="number">256</span>);</span><br><span class="line">image1 = <span class="built_in">ones</span>(<span class="number">256</span>,<span class="number">256</span>);</span><br><span class="line">image2 = <span class="built_in">ones</span>(<span class="number">256</span>,<span class="number">256</span>);</span><br><span class="line">image3 = <span class="built_in">ones</span>(<span class="number">256</span>,<span class="number">256</span>);</span><br><span class="line"></span><br><span class="line">k=<span class="number">1</span>;</span><br><span class="line"><span class="comment">%重组图像</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:m/<span class="number">8</span>;</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:n/<span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">        y = <span class="built_in">reshape</span>(kl_i(k, <span class="number">1</span>:<span class="number">64</span>),<span class="number">8</span>,<span class="number">8</span>);</span><br><span class="line">        y1 = <span class="built_in">reshape</span>(kl1_i(k, <span class="number">1</span>:<span class="number">64</span>),<span class="number">8</span>,<span class="number">8</span>);</span><br><span class="line">        y2 = <span class="built_in">reshape</span>(kl2_i(k, <span class="number">1</span>:<span class="number">64</span>),<span class="number">8</span>,<span class="number">8</span>);</span><br><span class="line">        y3 = <span class="built_in">reshape</span>(kl3_i(k, <span class="number">1</span>:<span class="number">64</span>),<span class="number">8</span>,<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">        ii = (<span class="built_in">i</span><span class="number">-1</span>)*<span class="number">8</span>+<span class="number">1</span>;</span><br><span class="line">        jj = (<span class="built_in">j</span><span class="number">-1</span>)*<span class="number">8</span>+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        image(ii:ii+<span class="number">7</span>,jj:jj+<span class="number">7</span>) = y;</span><br><span class="line">        image1(ii:ii+<span class="number">7</span>,jj:jj+<span class="number">7</span>) = y1;</span><br><span class="line">        image2(ii:ii+<span class="number">7</span>,jj:jj+<span class="number">7</span>) = y2;</span><br><span class="line">        image3(ii:ii+<span class="number">7</span>,jj:jj+<span class="number">7</span>) = y3;</span><br><span class="line"></span><br><span class="line">        k=k+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">figure</span></span><br><span class="line">subplot(<span class="number">221</span>);imshow(image);</span><br><span class="line">subplot(<span class="number">222</span>);imshow(image1);</span><br><span class="line">subplot(<span class="number">223</span>);imshow(image2);</span><br><span class="line">subplot(<span class="number">224</span>);imshow(image3);</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zyx</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zyx</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
